package ind.ericjturley.mcve.configurationproperties;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import static org.junit.jupiter.api.Assertions.assertEquals;

@SuppressWarnings("SpringJavaInjectionPointsAutowiringInspection"/*Idea doesn't know about @ConfigurationPropertiesScan yet*/)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE/*mocked*/,
        classes = {TheConfig.class, PushServicesProperties.class}) // <<<< Must import class for test if there's no bean available as part of `TheConfig` or you're not importing a @SpringBootApplication class.
class ConfigurationPropertiesTest {

    /**
     *           Java
     */
    @Autowired
    PushServicesProperties pushServicesProperties;

    @Test
    void javaVersionShouldAutowirePropertyFromConfigWithValueSix() {
        assertEquals(6, pushServicesProperties.getSnsClient().getMaxConnections());
    }

    /**
     *            Kotlin
     */
    @Autowired
    PushServicesProperties1 pushServicesProperties1;

    @Test
    void kotlinDependencyResolutionShouldAuto() {
        assertEquals(5, pushServicesProperties1.getSnsClient1().getMaxConnections());
    }
}